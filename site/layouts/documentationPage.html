<BaseLayout>
  <slot name="content">
    <div
      class="md:mx-auto px-4 md:px-0 w-full lg:max-w-3xl"
    >
      <div class="prose lg:prose-xl">
        <Heading
          level="1"
          &children="(get context document.data.title)"
        ></Heading>
        <div
          &children="(get context document.content)"
        ></div>
      </div>
      <div class="flex flex-col gap-4">
        <div
          class="flex flex-row gap-4 justify-between text-sm"
          &visibleIf="(or (get context document.previous) (get context document.next))"
        >
          <div
            &visibleIf="(get context document.previous)"
            class="flex flex-col gap-2"
          >
            <div class="flex flex-row gap-2">
              <span>←</span><span>Previous post</span>
            </div>
            <SiteLink
              &href="(get context document.previous.data.slug)"
              &children="(get context document.previous.data.title)"
            ></SiteLink>
          </div>
          <div
            &visibleIf="(get context document.next)"
            class="flex flex-col gap-2"
          >
            <div class="flex flex-row gap-2">
              <span>Next post</span><span>→</span>
            </div>
            <SiteLink
              &href="(get context document.next.data.slug)"
              &children="(get context document.next.data.title)"
            ></SiteLink>
          </div>
        </div>
        <div
          &visibleIf="(get context document.data.topics)"
        >
          <Heading level="2" class="text-lg"
            >Topics</Heading
          >
          <ul
            class="flex flex-row gap-4 text-sm"
            &foreach="(get context document.data.topics)"
          >
            <li>
              <Card>
                <slot name="title">
                  <SiteLink
                    &children="(get props title)"
                    &href="(concat topics / (get props slug))"
                  />
                </slot>
              </Card>
            </li>
          </ul>
        </div>
        <div>
          <Heading level="2" class="text-lg"
            >Comments</Heading
          >
          <div>
            TODO: Lazy-loaded Disqus commenting bit should
            go here
          </div>
        </div>
      </div>
    </div>
  </slot>
  <slot name="aside">
    <div
      class="flex flex-col gap-4 w-48 bg-white p-2 rounded-md"
    >
      <TableOfContents
        &toc="(get context document.tableOfContents)"
      />
    </div>
  </slot>
</BaseLayout>
